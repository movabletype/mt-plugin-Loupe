{{#if perm}}
{{#if FileUploadSupport}}
{{>js_views_card_partials_loading}}
{{>js_views_card_partials_title}}

<form id="upload-file-form" method="post" name="upload-file">
<div class="contents">
{{#each uploadedImages}}
<div class="uploaded-image">
  <img src="{{this.url}}">
</div>
{{/each}}
{{#if uploadError.length}}
<div class="error">
  <div class="upload-image icon-upload-fail"></div>
  <div class="message"><div class="message-inner">
  <p>{{#trans trans}}Failed uploading{{/trans}}</p>
  {{#each uploadError}}
  <p>{{#if this}}{{this.message}}{{/if}}</p>
  {{/each}}
  </div></div>
</div>
<div id="retry" class="upload-file button">
  <label for="upload-file-input">
  {{#trans trans}}retry{{/trans}}
  </label>
</div>
{{/if}}
{{#unless uploadError.length}}
{{#unless uploadedImages.length}}
<div class="upload-image icon-upload"></div>
{{/unless}}
{{/unless}}
<div class="upload-file-input-container">
  <input type="file" id="upload-file-input" accept="image/*"/>
</div>
<div id="upload-file" class="button">
  {{#if isLabelNeeded}}
  <label for="upload-file-input">
  {{/if}}
  <span class="upload-file-input-inner">
    {{#if uploadCompleted}}
      {{#trans trans}}more upload{{/trans}}
    {{else}}
      {{#if error}}
        {{#trans trans}}choose another files{{/trans}}
      {{else}}
        {{#trans trans}}choose files{{/trans}}
      {{/if}}
    {{/if}}
  </span>
  {{#if isLabelNeeded}}
  </label>
  {{/if}}
</div>
<div id="upload-file-uploading" class="upload-file button button-disabled">
  <span class="loading-image icon-loading"></span>
</div>
</div>
</form>
{{/if}}
{{/if}}
